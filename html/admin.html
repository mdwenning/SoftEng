<head>
    <title>Administrator</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>
<body>
	<h1>Active Projects</h1><br>
	<div>
		<ul id="ActiveProjects">
		</ul>
	</div>

	<h1>Archived Projects </h1><br>
	<div>
		<ul id="ArchivedProjects">
		</ul>
	</div>
	<br>

	<form id="update-project">
		<input type="text" id="pid" placeholder="Enter project ID">
    	<input type="button" value="Archive" id="Archive">
    	<input type="submit" value="Delete" id="Delete">
	</form>
	<script>
	var url = "https://s2vj3dtlfl.execute-api.us-east-1.amazonaws.com/alpha/project"
	
	function load() {
		$.ajax({
    		type: "GET",
    		url: url,
    		success: function(data)
    		{
    			projects = data['list'];
    			for (var i = 0; i < projects.length; i++) {
    				if (projects[i]['isArchived'] == 0) {
    					document.getElementById('ActiveProjects').innerHTML += "<li>" + projects[i]['name'] + "</li>";
    				}else{
    					document.getElementById('ArchivedProjects').innerHTML += "<li>" + projects[i]['name'] + "</li>";
    				}
    			}
            },
            error: function(xhr, status, error) 
            {
            	console.log(xhr);
            	console.log(status);
            	console.log(error);
            	alert(error.Message);
            }
        });
	}
	
	$("#update-project").submit(function(e) {
    	e.preventDefault(); // Don't just reload the page
    	
    	var form = $(this);
    	var url = "https://s2vj3dtlfl.execute-api.us-east-1.amazonaws.com/alpha/project/" + document.getElementById("pid").value + "/delete";
    	
    	$.ajax({
    		type: "POST",
    		url: url,
    		success: function(data)
    		{
    			alert("Success");
    			window.location.reload();
            },
            error: function(xhr, status, error) 
            {
            	console.log(xhr);
            	console.log(status);
            	console.log(error);
            	alert(error.Message);
            }
        });
    });
    
    window.onload = load;
    </script>
</body>